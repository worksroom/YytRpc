<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MallProduct">
    <resultMap type="MallProduct" id="MallProductMap">
        <result property="id" column="id"/>
        <result property="sellUserId" column="sell_user_id"/>
        <result property="goodsId" column="goods_id"/>
        <result property="classId" column="class_id"/>
        <result property="name" column="name"/>
        <result property="pic" column="pic"/>
        <result property="price" column="price"/>
        <result property="salePrice" column="sale_price"/>
        <result property="sincePrice" column="since_price"/>
        <result property="saleNum" column="sale_num"/>
        <result property="storeNum" column="store_num"/>
        <result property="rank" column="rank"/>
        <result property="updateTime" column="update_time"/>
        <result property="createTime" column="create_time"/>
    </resultMap>

    <insert id="insertList">
        insert into mall_product
        (name,rank,sell_user_id,goods_id,class_id,pic,price,
        sale_price,since_price,sale_num,store_num,update_time,create_time)
        VALUES
        <foreach collection="list"  item="temp" separator=",">
        (#{temp.name},#{temp.rank},#{temp.sellUserId},#{temp.goodsId},#{temp.classId},
            #{temp.pic},#{temp.price},#{temp.salePrice},
            #{temp.sincePrice},#{temp.saleNum},#{temp.storeNum},
            #{temp.updateTime},#{temp.createTime})

        </foreach>
    </insert>

    <update id="update" parameterType="MallProduct">
        update mall_product set name=#{name},rank=#{rank} , sell_user_id=#{sellUserId},goods_id=#{goodsId},class_id=#{classId},
        pic=#{pic},price=#{price},
        sale_price=#{salePrice},since_price=#{sincePrice},sale_num=#{saleNum},store_num=#{storeNum},
        update_time=#{updateTime}
        where id=#{id}
    </update>

    <update id="updateStore" parameterType="map">
        update mall_product set store_num = store_num + #{num} where id=#{id}
    </update>

    <update id="updateSellNum" parameterType="map">
        update mall_product set since_price = since_price + #{num} where id=#{id}
    </update>

    <delete id="delete" parameterType="int">
        delete from mall_product where id=#{id}
    </delete>



    <select id="findByGood" parameterType="int"  resultMap="MallProductMap">
       SELECT  id,name,rank,sell_user_id,goods_id,class_id,pic,price,
        sale_price,since_price,sale_num,store_num,update_time,create_time from mall_product
       where  goods_id=#{goodsId}

    </select>



</mapper>